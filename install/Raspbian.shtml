<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<title>Installing JMRI on Raspbian/Linux</title>

<!-- Style -->
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
<link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
<link rel="icon" href="/images/jmri.ico" TYPE="image/png">
<link rel="home" title="Home" href="/">
<!-- /Style -->
</head>

<body>
<!--#include virtual="/Header" -->

<!--#include virtual="/download/Sidebar" -->
<div id="mainContent">

<h1>Installing JMRI on Raspbian</h1>

<p>These instructions describe the installation of JMRI
on a Raspberry Pi system running the Raspbian OS. The Raspberry Pi is becoming increasingly popular as a small and cheap computer.
Raspbian is based on Debian and is recognized as being a very user friendly distribution.<br>

<p>JMRI installation consists of two stages: install Java and install JMRI.

<a id="installation"/>
<h2>Installation Steps</h2>

	<ol>
	<li>Determine if your system software supports JMRI.</li>
	
	<a name="sysreq"></a><h3>JMRI System Requirements</h3>
	<p>These instructions deal with installing
	JMRI on a <a href="https://www.raspberrypi.org/products/raspberry-pi-2-model-b/">Raspberry Pi model 2 B</a> running the latest Raspbian OS.</p>
	
	<h4>Raspbian 4.1 Jessy</h4>
	<p>Fresh install on a Raspberry Pi B 2 is straightforward, as this OS includes Java 1.8 and the JMRI Linux install is ready for Arm. Follow the steps outlined below.</p>
	
	<h4>Raspbian 3.18 Wheezy</h4>
	<p>Wheezy might run on a Pi A or B+, but OpenJDK is said to be a lot slower then the JDK shipping with Jessy.
	</p>
	
	<p>Details on installing Raspbian can be found at the 
	<a href="https://www.raspberrypi.org/downloads/raspbian/">Raspberry Download site</a>. Beginners should start with the <a href="https://www.raspberrypi.org/downloads/noobs/">NOOBS</a> install.</p>
	
	
  <li>Determine if you have the needed hardware drivers.
	<h3>LocoBuffer USB</h3>
	We recommend you use Raspbian 12.04 or later with the LocoBuffer-USB.
	
	<h3>Digitrax PR3</h3>
	The PR3 is reported to works far more reliably than it did under Windows (Dan M.).
	
	<h3>XPressNet</h3>
	<p>[please report your results]
	
<p>In the next section we describe how to install the components
	needed for JMRI to run, followed by how to install JMRI itself.
	Before starting the install, make sure your machine has a working
	internet connection (for downloads etc.) via either Wifi or a UTP cable to your Router.
	
<li>Depending on how your Pi is set up, you might need to 
  install <strong>Java</strong>.
	<p>One must be careful which Java version is installed. For current JMRI releases (version 3.10 and up) you need "Java 8" or "Java 1.8" (the Java numbering is confusing). Open a Terminal window and type 'java -version'. This will return something like:
	<pre>Java 1.x</pre>. 
	If necessary, install Java from the repositories.<br>
	[please report exact instructions to update Java]
	
	<a id="rxtx">
	<li>Copy RxTx</li></a>
	<p>Matt Harris reported in July 2015: The comms libraries fix is no longer necessary on the latest development releases of JMRI as the start-up script has been updated to better detect the ARM architecture. Some of the steps in the JMR-Pi script are no longer necessary.<br>
	On a Pi2, it was simply a case of uncompressing the .tgz file to an appropriate location and executing the DecoderPro script. Comms interface (in my case MERG CANUSB) was detected automatically. Raspbian Jessy already has a suitable Java Runtime installed out of the box.
	
	<p>The RxTx library used to be a problem requiring modifications to
	enable JMRI to run. Since JMRI version 3.5 this is no longer required. However, if
	you are using a version of JMRI prior to 3.5 then the RxTx library in Raspbian must be
	"unmodified". There is a script to do this in the JMRI users Yahoo group "Files" area if you wish to run JMRI 3.8 on Raspbian 3.18 Wheezy.</p>
	
	<p>This script will do the following:
		<ul>
		<li>steps</li>
		</ul>
	
       <li>Get the JMRI software...</li>
	<p><a href="http://jmri.sourceforge.net/download/index.shtml">Download JMRI</a>. Choose the Linux edition.</p>
	<p>Double click on the .tgz file to open the Tar, then click extract.</p>
	
	       <li>...and install it.</li>
	
	Installation on Raspbian used to involve some command line work as the Pi runs an Arm processor. An installation script
	was written by Matthew Macdonald-Wallace to modify certain libraries so that JMRI would run.
	He provides a <a href="https://github.com/proffalken/JMR-Pi">Pi install script</a> on GitHub.</p>
	
	<li>The Environment</li>
	<p>Your login account should have root permissions to access the outputs of the Pi interface. More details on our <a href="../help/en/html/hardware/pi/index.shtml">Raspberry Pi via GPIO</a> hardware Help page.</p>
	<p>On a fresh install the environment is set okay. In a Terminal window type <code>java -version</code><br>
	This will return something like:<br>
	java version "1.6.0_15"<br>
	Java(&trade;)  Runtime Environment (build 1.8.0)<br>
	Java HotSpot(&trade;) Client VM (build 14.1-b02, mixed mode, sharing)</p>
	</li>
	
	</ol>

<h2>Starting JMRI</h2>
<p>Using Terminal: To start JMRI, open a Terminal and enter "./DecoderPro".</p>
<p>Using the GUI: To create a complete set of Desktop icons that you can just double-click, Dan M. wrote a <a href="support/Pimageset.tgz">set of desktop startup icons</a> for the Pi. Again, double click on the .tgz file to open the Tar, then click extract and copy the separate startup files you wish to your desktop folder; change the path in these text files to match your install).</p>
<p>After a clean install, the JMRI Preferences pane will open. Select your Connection and USB port, click "Save"  and restart.</p>

<a id="notes"/>
<h2>Notes:</h2>

<h3>Autostart</h3>
<p>You could have your Pi automatically open DecoderPro and start a Terminal Server at startup if e.g. the Pi is mounted under your layout and runs a so called "headless mode". See this blog on <p><a href="http://www.nscale.net/forums/showthread.php?37250-JMRI-on-a-Raspberry-Pi-2">Nscale.net forum JMRI on a Pi2</a> for instructions.</p>

<h3>Errors</h3>
<p>If you have any problems get back to the <a href="https://groups.yahoo.com/neo/groups/jmriusers/info">JMRI users</a> Yahoo group.</p>

<p><a href="https://www.raspberrypi.org/help/">Raspberrypi.org online Help</a>.</p>

<p>(Rev 4.2, updated 02 Jan 2016 )</p>

<!-- /Footer -->
    </div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
</body>
</html>
